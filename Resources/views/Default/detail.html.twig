{% extends "YdleRoomBundle:Default:index.html.twig" %}

{% block content %}
    <div class="row">
        <div class="col-lg-8 with-border" style="width: 760px; margin-right: 20px;">
          
            <h2>{{ room.name }}</h2>
            {% if room.nodes|length %}
            {% for node in room.nodes %}
            <div class="graph-container">
                <div id="graphplaceholder-{{ node.id }}" class="graph graphplaceholder" data-nid="{{ node.id }}"></div>
            </div>
            {% endfor %}
            {% endif %}
            
        </div>
        <div class="col-lg-4 content panel panel-default">
          <div class="panel-heading">
          <h3 class="panel-title">Détails</h3>
          </div>
          <div class="panel-body">
          Nom : {{ room.name }}<br />
          Type : {{ room.type.name }}<br />
          Active : {% if room.isactive %}
          <a href="" class="label label-success">Yes</a>
          {% else %}
          <a href="" class="label label-primary">No</a>
          {% endif %}<br />
          {% if room.description %}
          Description : {{ room.description }} <br />
          {% endif %}
          Capteurs : 
          {% if room.nodes|length %}
            {% for node in room.nodes %}
              {{ node.name }}<br />
            {% endfor %}
          {% else %}
          Aucun capteur
          {% endif %}
          </div>
          <div class="panel-footer">
          <a href="{{ path('rooms') }}" class="btn btn-default">Return</a>
          </div>
        </div>
        {% if data | length %}
        <div class="col-lg-4 content panel panel-default">
          <div class="panel-heading">
          <h3 class="panel-title">Données</h3>
          </div>
          <div class="panel-body">
          {% for sensorData in data %}
            {% set type = sensorData.type.unit %}
            {% if type == '°' %}
              {{ sensorData.type.name }} : {{ sensorData.data / 100 }} °C
            {% elseif type == '%' %}
              {{ sensorData.type.name }} : {{ sensorData.data / 100 | number_format }} %
            {% endif %}
          {% endfor %}
          </div>
        </div>
        {% endif %}
    </div>
{% endblock %}